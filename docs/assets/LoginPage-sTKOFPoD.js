import{u as w,r as n,c as p,a as m,w as x,b as u,d as _,e as t,o as d,f as V,g as h,t as y}from"./index-gD9XJaxq.js";const k={class:"flex h-[100svh] w-screen flex-col items-center justify-center bg-gradient-to-b from-blue-300 to-blue-400"},B={class:"flex w-full max-w-[600px] flex-col gap-2"},L=m("h1",{class:"px-4"},"NxGen Administrator Login",-1),S={key:1},T={__name:"LoginPage",setup(N){const i=w(),f=n(null),s=n({username:null,password:null}),e=n({username:{message:null,color:null},password:{message:null,color:null}}),l=n(!1);async function v(){l.value=!0,e.value.username.message=null,e.value.username.color=null,e.value.password.message=null,e.value.password.color=null,await h({method:"post",url:"https://nxgen-backend.adaptable.app/api/v2/admin/login",data:{username:s.value.username,password:s.value.password}}).then(o=>{localStorage.setItem("ncpadmin_token",o.data.adminToken),l.value=!1,i.push({name:"admin dashboard"}),y.add({msg:"Successfully logged in",duration:2e3})}).catch(o=>{o.response.status===400&&(e.value.username.message="Wrong username or password",e.value.username.color="error",e.value.password.message=null,e.value.password.color="error"),o.response.status===401&&(e.value.username.message=null,e.value.username.color=null,e.value.password.message="Wrong password",e.value.password.color="error")}).finally(()=>l.value=!1)}return(o,a)=>{const c=t("VFormTextbox"),g=t("VLoader"),b=t("VButton");return d(),p("div",k,[m("div",B,[L,m("form",{onSubmit:a[2]||(a[2]=x(r=>v(),["prevent"])),ref_key:"formRef",ref:f,class:"flex w-full flex-col gap-2 rounded-2xl bg-blue-50 px-4 py-4 shadow-lg"},[u(c,{modelValue:s.value.username,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value.username=r),color:e.value.username.color,"sub-label":e.value.username.message,label:"Username",type:"text"},null,8,["modelValue","color","sub-label"]),u(c,{modelValue:s.value.password,"onUpdate:modelValue":a[1]||(a[1]=r=>s.value.password=r),color:e.value.password.color,"sub-label":e.value.password.message,label:"Password",type:"password"},null,8,["modelValue","color","sub-label"]),u(b,{disabled:l.value,class:"justify-center",type:"submit"},{default:_(()=>[l.value?(d(),V(g,{key:0,size:"16px",thickness:"2px"})):(d(),p("span",S,"Login"))]),_:1},8,["disabled"])],544)])])}}};export{T as default};
