import{G as C,u as w,r as d,h as V,g as y,t as c,c as n,b as l,a as s,A as b,F as x,z as D,e as u,o as r,d as B,m as z}from"./index-Mz5YPyL0.js";const N={class:"flex w-full flex-col gap-2 px-64 pb-4"},S={class:"my-4 flex h-96 flex-row items-end justify-between rounded-2xl bg-gradient-to-b from-blue-300 to-blue-400 p-8 shadow-xl"},A={class:"flex flex-col"},I={class:"text-4xl font-semibold leading-none"},L={key:0,class:"flex items-center justify-center py-4"},R={key:1,class:"flex items-center justify-center py-4"},j=s("h2",null,"No cases created",-1),F=[j],M={__name:"CasesPage",setup(U){const g=C(),h=w(),i=d(null),f=d(!0);V(async()=>{await y({method:"get",url:"https://nxgen-backend.adaptable.app/api/v2/case-scenarios",headers:{Authorization:`Bearer ${localStorage.getItem("ncpadmin_token")}`,Role:"admin"},params:{category:g.params.category}}).then(e=>{i.value=e.data}).catch(e=>{e.response.status==401?h.push({name:"admin login"}):c.add({msg:e.response.data,duration:4e3})}).finally(()=>f.value=!1)});const p=d(!1),o=d({state:!1,id:null,index:null,toggle(e,a){this.state=!this.state,this.id=e,this.index=a},async confirm(){this.state=!this.state,c.add({msg:"Deleting Case",duration:1e3}),p.value=!0,await y({method:"delete",url:`https://nxgen-backend.adaptable.app/api/v2/case-scenarios/${this.id}`,headers:{Authorization:`Bearer ${localStorage.getItem("ncpadmin_token")}`,Role:"admin"},params:{category:g.params.category}}).then(()=>{i.value.splice(this.index,1),c.add({msg:"Case deleted",duration:4e3})}).catch(e=>{e.response.status==401?h.push({name:"admin login"}):c.add({msg:e.response.data,duration:4e3})}).finally(()=>p.value=!1)}});return(e,a)=>{const v=u("VIconButton"),_=u("VLoader"),k=u("router-link"),$=u("VDialog");return r(),n(x,null,[l(v,{onClick:a[0]||(a[0]=t=>e.$router.replace({name:"admin dashboard"})),icon:"arrow_back",variant:"ghost",size:"lg",class:"!sticky left-52 top-[100px] !w-fit"}),s("div",N,[s("div",S,[s("div",A,[s("span",I,b(e.$route.params.category.charAt().toUpperCase()+e.$route.params.category.slice(1)),1)]),s("button",{onClick:a[1]||(a[1]=t=>e.$router.push({name:"admin create case",params:{category:e.$route.params.category}})),class:"rounded-full px-4 py-2 text-2xl font-medium transition-colors hover:bg-blue-950/10"}," + New Case ")]),f.value?(r(),n("div",L,[l(_,{size:"32px",thickness:"2px"})])):i.value.length===0?(r(),n("div",R,F)):(r(!0),n(x,{key:2},D(i.value,(t,m)=>(r(),n("div",{key:t.id,class:"flex flex-row items-center rounded-2xl border border-neutral-400 pr-10 transition-colors hover:bg-neutral-400/20"},[l(k,{to:{name:"admin edit case",params:{number:m+1,id:t.id,category:e.$route.params.category}},class:"grow py-4 pl-10 text-xl font-medium"},{default:B(()=>[z("Case Scenario "+b(m+1),1)]),_:2},1032,["to"]),l(v,{onClick:E=>o.value.toggle(t.id,m),disabled:p.value,variant:"ghost",color:"error",size:"lg",icon:"delete",class:"shrink-0"},null,8,["onClick","disabled"])]))),128))]),l($,{"go-open":o.value.state,"onUpdate:goOpen":a[2]||(a[2]=t=>o.value.state=t),header:"Case Deletion",body:`Do you want to delete Case Scenario ${o.value.index+1}?`,"cancel-label":"No","confirm-label":"Yes",onConfirm:a[3]||(a[3]=t=>o.value.confirm())},null,8,["go-open","body"])],64)}}};export{M as default};
