import{r as d,h as C,g as y,t as c,c as n,b as r,a as o,A as x,F as b,z as w,G as V,u as D,e as u,o as l,d as B,m as z}from"./index-gwOpXNtX.js";const N={class:"flex w-full flex-col gap-2 px-64 pb-4"},S={class:"my-4 flex h-96 flex-row items-end justify-between rounded-2xl bg-gradient-to-b from-blue-300 to-blue-400 p-8 shadow-xl"},A={class:"flex flex-col"},I={class:"text-4xl font-semibold leading-none"},L={key:0,class:"flex items-center justify-center py-4"},R={key:1,class:"flex items-center justify-center py-4"},j=o("h2",null,"No cases created",-1),F=[j],M={__name:"CasesPage",setup(U){const g=V(),h=D(),i=d(null),f=d(!0);C(async()=>{await y({method:"get",url:"https://nxgen-backend.onrender.com/api/v2/case-scenarios",headers:{Authorization:`Bearer ${localStorage.getItem("ncpadmin_token")}`,Role:"admin"},params:{category:g.params.category}}).then(e=>{i.value=e.data}).catch(e=>{e.response.status==401?h.push({name:"admin login"}):c.add({msg:e.response.data,duration:4e3})}).finally(()=>f.value=!1)});const m=d(!1),s=d({state:!1,id:null,index:null,toggle(e,t){this.state=!this.state,this.id=e,this.index=t},async confirm(){this.state=!this.state,c.add({msg:"Deleting Case",duration:1e3}),m.value=!0,await y({method:"delete",url:`https://nxgen-backend.onrender.com/api/v2/case-scenarios/${this.id}`,headers:{Authorization:`Bearer ${localStorage.getItem("ncpadmin_token")}`,Role:"admin"},params:{category:g.params.category}}).then(()=>{i.value.splice(this.index,1),c.add({msg:"Case deleted",duration:4e3})}).catch(e=>{e.response.status==401?h.push({name:"admin login"}):c.add({msg:e.response.data,duration:4e3})}).finally(()=>m.value=!1)}});return(e,t)=>{const v=u("VIconButton"),_=u("VLoader"),k=u("router-link"),$=u("VDialog");return l(),n(b,null,[r(v,{onClick:t[0]||(t[0]=a=>e.$router.replace({name:"admin dashboard"})),icon:"arrow_back",variant:"ghost",size:"lg",class:"!sticky left-52 top-[100px] !w-fit"}),o("div",N,[o("div",S,[o("div",A,[o("span",I,x(e.$route.params.category.charAt().toUpperCase()+e.$route.params.category.slice(1)),1)]),o("button",{onClick:t[1]||(t[1]=a=>e.$router.push({name:"admin create case",params:{category:e.$route.params.category}})),class:"rounded-full px-4 py-2 text-2xl font-medium transition-colors hover:bg-blue-950/10"}," + New Case ")]),f.value?(l(),n("div",L,[r(_,{size:"32px",thickness:"2px"})])):i.value.length===0?(l(),n("div",R,F)):(l(!0),n(b,{key:2},w(i.value,(a,p)=>(l(),n("div",{key:a.id,class:"flex flex-row items-center rounded-2xl border border-neutral-400 pr-10 transition-colors hover:bg-neutral-400/20"},[r(k,{to:{name:"admin edit case",params:{number:p+1,id:a.id,category:e.$route.params.category}},class:"grow py-4 pl-10 text-xl font-medium"},{default:B(()=>[z("Case Scenario "+x(p+1),1)]),_:2},1032,["to"]),r(v,{onClick:E=>s.value.toggle(a.id,p),disabled:m.value,variant:"ghost",color:"error",size:"lg",icon:"delete",class:"shrink-0"},null,8,["onClick","disabled"])]))),128))]),r($,{"go-open":s.value.state,"onUpdate:goOpen":t[2]||(t[2]=a=>s.value.state=a),header:"Case Deletion",body:`Do you want to delete Case Scenario ${s.value.index+1}?`,"cancel-label":"No","confirm-label":"Yes",onConfirm:t[3]||(t[3]=a=>s.value.confirm())},null,8,["go-open","body"])],64)}}};export{M as default};
